(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s.CalendarHeatmap={},s.Vue))})(this,function(s,e){"use strict";var G=Object.defineProperty;var j=(s,e,n)=>e in s?G(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var r=(s,e,n)=>(j(s,typeof e!="symbol"?e+"":e,n),n);const h=class{constructor(t,a,l){r(this,"startDate");r(this,"endDate");r(this,"max");r(this,"_values");r(this,"_firstFullWeekOfMonths");r(this,"_activities");r(this,"_calendar");this.endDate=this.parseDate(t),this.max=l||Math.ceil(Math.max(...a.map(o=>o.count))/5*4),this.startDate=this.shiftDate(t,-h.DAYS_IN_ONE_YEAR),this._values=a}set values(t){this.max=Math.ceil(Math.max(...t.map(a=>a.count))/5*4),this._values=t,this._firstFullWeekOfMonths=void 0,this._calendar=void 0,this._activities=void 0}get values(){return this._values}get activities(){if(!this._activities){this._activities=new Map;for(let t=0,a=this.values.length;t<a;t++)this._activities.set(this.keyDayParser(this.values[t].date),{count:this.values[t].count,colorIndex:this.getColorIndex(this.values[t].count)})}return this._activities}get weekCount(){return this.getDaysCount()/h.DAYS_IN_WEEK}get calendar(){if(!this._calendar){let t=this.shiftDate(this.startDate,-this.getCountEmptyDaysAtStart());t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this._calendar=new Array(this.weekCount);for(let a=0,l=this._calendar.length;a<l;a++){this._calendar[a]=new Array(h.DAYS_IN_WEEK);for(let o=0;o<h.DAYS_IN_WEEK;o++){const i=this.activities.get(this.keyDayParser(t));this._calendar[a][o]={date:new Date(t.valueOf()),count:i?i.count:void 0,colorIndex:i?i.colorIndex:0},t.setDate(t.getDate()+1)}}}return this._calendar}get firstFullWeekOfMonths(){if(!this._firstFullWeekOfMonths){const t=this.calendar;this._firstFullWeekOfMonths=[];for(let a=1,l=t.length;a<l;a++){const o=t[a-1][0].date,i=t[a][0].date;(o.getFullYear()<i.getFullYear()||o.getMonth()<i.getMonth())&&this._firstFullWeekOfMonths.push({value:i.getMonth(),index:a})}}return this._firstFullWeekOfMonths}getColorIndex(t){return t==null?0:t<=0?1:t>=this.max?5:Math.ceil(t*100/this.max*.03)+1}getCountEmptyDaysAtStart(){return this.startDate.getDay()}getCountEmptyDaysAtEnd(){return h.DAYS_IN_WEEK-1-this.endDate.getDay()}getDaysCount(){return h.DAYS_IN_ONE_YEAR+1+this.getCountEmptyDaysAtStart()+this.getCountEmptyDaysAtEnd()}shiftDate(t,a){const l=new Date(t);return l.setDate(l.getDate()+a),l}parseDate(t){return t instanceof Date?t:new Date(t)}keyDayParser(t){const a=this.parseDate(t);return String(a.getFullYear())+String(a.getMonth()).padStart(2,"0")+String(a.getDate()).padStart(2,"0")}};let n=h;r(n,"DEFAULT_RANGE_COLOR_LIGHT",["#ebedf0","#dae2ef","#c0ddf9","#73b3f3","#3886e1","#17459e"]),r(n,"DEFAULT_RANGE_COLOR_DARK",["#1f1f22","#1e334a","#1d466c","#1d5689","#1d69ac","#1B95D1"]),r(n,"DEFAULT_LOCALE",{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],on:"on",less:"Less",more:"More"}),r(n,"DEFAULT_TOOLTIP_UNIT","contributions"),r(n,"DAYS_IN_ONE_YEAR",365),r(n,"DAYS_IN_WEEK",7),r(n,"SQUARE_SIZE",10);const x={class:"vch__container"},B={class:"vch__scroll-area"},C=["viewBox"],A=["transform"],M=["x","y"],F=["transform"],N=["y"],O=["transform"],W=["transform"],L=["transform","width","height","data-week-index","data-day-index","onClick"],b={class:"vch__legend-modern"},T={class:"vch__legend-modern-bar"},v=e.defineComponent({__name:"CalendarHeatmap",props:{endDate:null,max:null,rangeColor:null,values:null,locale:null,vertical:{type:Boolean},darkMode:{type:Boolean}},setup(u){const t=u,a=e.ref(20);function l(){window.innerWidth<420?a.value=10:window.innerWidth<700?a.value=14:window.innerWidth<900?a.value=17:a.value=20}typeof window<"u"&&(l(),window.addEventListener("resize",l));const o=e.computed(()=>a.value/8),i={months:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],days:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],less:"Низкая",more:"Высокая",on:"на"},f=e.ref({...i,...t.locale}),k=e.ref(t.rangeColor??["#ede9fe","#bcb4fa","#a389f4","#8854ff","#322850"]),V=e.ref(new Date),p=e.ref(new n(t.endDate,t.values,t.max)),g=e.computed(()=>Math.ceil(a.value*2.2));e.computed(()=>a.value*2.5);const y=e.computed(()=>a.value+a.value/2),R=e.computed(()=>p.value.firstFullWeekOfMonths),$=e.computed(()=>`translate(${g.value}, ${y.value})`),P=e.computed(()=>`translate(${g.value}, 0)`),K=e.computed(()=>`translate(0, ${y.value})`),U=e.computed(()=>{const c=g.value+a.value*p.value.weekCount+a.value*1.3,S=y.value+a.value*7;return`0 0 ${c} ${S}`});function q(c){return`translate(${c*a.value}, 0)`}function z(c){return`translate(0, ${c*a.value})`}function w(c){return{x:a.value*c.index,y:13}}return e.watch(()=>t.locale,c=>{f.value=c?{...i,...c}:i}),(c,S)=>(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("div",B,[(e.openBlock(),e.createElementBlock("svg",{class:"vch__wrapper",viewBox:e.unref(U)},[e.createElementVNode("g",{class:"vch__months__labels__wrapper",transform:e.unref(P)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(R),(_,d)=>(e.openBlock(),e.createElementBlock("text",{class:"vch__month__label",key:d,x:w(_).x,y:w(_).y},e.toDisplayString(f.value.months[_.value]),9,M))),128))],8,A),e.createElementVNode("g",{class:"vch__days__labels__wrapper",transform:e.unref(K)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value.days,(_,d)=>(e.openBlock(),e.createElementBlock("text",{key:d,class:"vch__day__label",x:0,y:16+d*a.value},e.toDisplayString(_),9,N))),128))],8,F),e.createElementVNode("g",{class:"vch__year__wrapper",transform:e.unref($)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value.calendar,(_,d)=>(e.openBlock(),e.createElementBlock("g",{class:"vch__month__wrapper",key:d,transform:q(d)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_,(D,E)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:E},[D.date<V.value?(e.openBlock(),e.createElementBlock("rect",{key:0,class:"vch__day__square",rx:4,ry:4,transform:z(E),width:a.value-e.unref(o),height:a.value-e.unref(o),style:e.normalizeStyle({fill:k.value[D.colorIndex]}),"data-week-index":d,"data-day-index":E,onClick:Q=>c.$emit("dayClick",D)},null,12,L)):e.createCommentVNode("",!0)],64))),128))],8,W))),128))],8,O)],8,C))]),e.createElementVNode("div",b,[e.createElementVNode("span",null,e.toDisplayString(f.value.less),1),e.createElementVNode("div",T,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(_,d)=>(e.openBlock(),e.createElementBlock("span",{key:d,class:"vch__legend-modern-box",style:e.normalizeStyle({background:_})},null,4))),128))]),e.createElementVNode("span",null,e.toDisplayString(f.value.more),1)])]))}}),J="",m=((u,t)=>{const a=u.__vccOpts||u;for(const[l,o]of t)a[l]=o;return a})(v,[["__scopeId","data-v-e91ba278"]]);function I(u){u.component(m.name,m)}const Y={install:I};s.CalendarHeatmap=m,s.Heatmap=n,s.default=Y,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=vue3-calendar-heatmap.umd.js.map
