{"version":3,"file":"vue3-calendar-heatmap.umd.js","sources":["../src/components/Heatmap.ts","../src/components/CalendarHeatmap.vue","../src/index.ts"],"sourcesContent":["export interface Value {\r\n\tdate: Date | string;\r\n\tcount: number;\r\n}\r\n\r\nexport interface Activity {\r\n\tcount: number;\r\n\tcolorIndex: number;\r\n}\r\n\r\nexport type Activities = Map<string, Activity>;\r\n\r\nexport interface CalendarItem {\r\n\tdate: Date;\r\n\tcount?: number;\r\n\tcolorIndex: number;\r\n}\r\n\r\nexport type Calendar = CalendarItem[][];\r\n\r\nexport interface Month {\r\n\tvalue: number;\r\n\tindex: number;\r\n}\r\n\r\nexport interface Locale {\r\n\tmonths: string[];\r\n\tdays: string[];\r\n\ton: string;\r\n\tless: string;\r\n\tmore: string;\r\n}\r\n\r\nexport type TooltipFormatter = (item: CalendarItem, unit: string) => string;\r\n\r\nexport class Heatmap {\r\n\r\n\tstatic readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#dae2ef', '#c0ddf9', '#73b3f3', '#3886e1', '#17459e' ];\r\n\tstatic readonly DEFAULT_RANGE_COLOR_DARK  = [ '#1f1f22', '#1e334a', '#1d466c', '#1d5689', '#1d69ac', '#1B95D1' ];\r\n\t// other color candidates\r\n\t// static readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#9be9a8', '#40c463', '#30a14e', '#216e39' ];\r\n\t// static readonly DEFAULT_RANGE_COLOR_DARK  = [ '#161b22', '#0e4429', '#006d32', '#26a641', '#39d353' ];\r\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#011526', '#012E40', '#025959', '#02735E', '#038C65' ];\r\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#161b22', '#015958', '#008F8C', '#0CABA8', '#0FC2C0' ];\r\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#012030', '#13678A', '#45C4B0', '#9AEBA3', '#DAFDBA' ];\r\n\tstatic readonly DEFAULT_LOCALE: Locale = {\r\n\t\tmonths: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],\r\n\t\tdays  : [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],\r\n\t\ton    : 'on',\r\n\t\tless  : 'Less',\r\n\t\tmore  : 'More'\r\n\t};\r\n\tstatic readonly DEFAULT_TOOLTIP_UNIT   = 'contributions';\r\n\tstatic readonly DAYS_IN_ONE_YEAR       = 365;\r\n\tstatic readonly DAYS_IN_WEEK           = 7;\r\n\tstatic readonly SQUARE_SIZE            = 10;\r\n\r\n\tstartDate: Date;\r\n\tendDate: Date;\r\n\tmax: number;\r\n\r\n\tprivate _values: Value[];\r\n\tprivate _firstFullWeekOfMonths?: Month[];\r\n\tprivate _activities?: Activities;\r\n\tprivate _calendar?: Calendar;\r\n\r\n\tconstructor(endDate: Date | string, values: Value[], max?: number) {\r\n\t\tthis.endDate   = this.parseDate(endDate);\r\n\t\tthis.max       = max || Math.ceil((Math.max(...values.map(day => day.count)) / 5) * 4);\r\n\t\tthis.startDate = this.shiftDate(endDate, -Heatmap.DAYS_IN_ONE_YEAR);\r\n\t\tthis._values   = values;\r\n\t}\r\n\r\n\tset values(v: Value[]) {\r\n\t\tthis.max                    = Math.ceil((Math.max(...v.map(day => day.count)) / 5) * 4);\r\n\t\tthis._values                = v;\r\n\t\tthis._firstFullWeekOfMonths = undefined;\r\n\t\tthis._calendar              = undefined;\r\n\t\tthis._activities            = undefined;\r\n\t}\r\n\r\n\tget values(): Value[] {\r\n\t\treturn this._values;\r\n\t}\r\n\r\n\tget activities(): Activities {\r\n\t\tif (!this._activities) {\r\n\t\t\tthis._activities = new Map();\r\n\t\t\tfor (let i = 0, len = this.values.length; i < len; i++) {\r\n\t\t\t\tthis._activities.set(this.keyDayParser(this.values[ i ].date), {\r\n\t\t\t\t\tcount     : this.values[ i ].count,\r\n\t\t\t\t\tcolorIndex: this.getColorIndex(this.values[ i ].count)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._activities;\r\n\t}\r\n\r\n\tget weekCount() {\r\n\t\treturn this.getDaysCount() / Heatmap.DAYS_IN_WEEK;\r\n\t}\r\n\r\n\tget calendar() {\r\n\t\tif (!this._calendar) {\r\n\t\t\tlet date       = this.shiftDate(this.startDate, -this.getCountEmptyDaysAtStart());\r\n\t\t\tdate           = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n\t\t\tthis._calendar = new Array(this.weekCount);\r\n\t\t\tfor (let i = 0, len = this._calendar.length; i < len; i++) {\r\n\t\t\t\tthis._calendar[ i ] = new Array(Heatmap.DAYS_IN_WEEK);\r\n\t\t\t\tfor (let j = 0; j < Heatmap.DAYS_IN_WEEK; j++) {\r\n\t\t\t\t\tconst dayValues          = this.activities.get(this.keyDayParser(date));\r\n\t\t\t\t\tthis._calendar![ i ][ j ] = {\r\n\t\t\t\t\t\tdate      : new Date(date.valueOf()),\r\n\t\t\t\t\t\tcount     : dayValues ? dayValues.count : undefined,\r\n\t\t\t\t\t\tcolorIndex: dayValues ? dayValues.colorIndex : 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdate.setDate(date.getDate() + 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._calendar;\r\n\t}\r\n\r\n\tget firstFullWeekOfMonths(): Month[] {\r\n\t\tif (!this._firstFullWeekOfMonths) {\r\n\t\t\tconst cal                   = this.calendar;\r\n\t\t\tthis._firstFullWeekOfMonths = [];\r\n\t\t\tfor (let index = 1, len = cal.length; index < len; index++) {\r\n\t\t\t\tconst lastWeek    = cal[ index - 1 ][ 0 ].date,\r\n\t\t\t\t\t  currentWeek = cal[ index ][ 0 ].date;\r\n\t\t\t\tif (lastWeek.getFullYear() < currentWeek.getFullYear() || lastWeek.getMonth() < currentWeek.getMonth()) {\r\n\t\t\t\t\tthis._firstFullWeekOfMonths.push({ value: currentWeek.getMonth(), index });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._firstFullWeekOfMonths;\r\n\t}\r\n\r\n\tgetColorIndex(count?: number) {\r\n\t\tif (count === null || count === undefined) {\r\n\t\t\treturn 0;\r\n\t\t} else if (count <= 0) {\r\n\t\t\treturn 1;\r\n\t\t} else if (count >= this.max) {\r\n\t\t\treturn 5;\r\n\t\t} else {\r\n\t\t\treturn (Math.ceil(((count * 100) / this.max) * (0.03))) + 1;\r\n\t\t}\r\n\t}\r\n\r\n\tgetCountEmptyDaysAtStart() {\r\n\t\treturn this.startDate.getDay();\r\n\t}\r\n\r\n\tgetCountEmptyDaysAtEnd() {\r\n\t\treturn (Heatmap.DAYS_IN_WEEK - 1) - this.endDate.getDay();\r\n\t}\r\n\r\n\tgetDaysCount() {\r\n\t\treturn Heatmap.DAYS_IN_ONE_YEAR + 1 + this.getCountEmptyDaysAtStart() + this.getCountEmptyDaysAtEnd();\r\n\t}\r\n\r\n\tprivate shiftDate(date: Date | string, numDays: number) {\r\n\t\tconst newDate = new Date(date);\r\n\t\tnewDate.setDate(newDate.getDate() + numDays);\r\n\t\treturn newDate;\r\n\t}\r\n\r\n\tprivate parseDate(entry: Date | string) {\r\n\t\treturn (entry instanceof Date) ? entry : (new Date(entry));\r\n\t}\r\n\r\n\tprivate keyDayParser(date: Date | string) {\r\n\t\tconst day = this.parseDate(date);\r\n\t\treturn String(day.getFullYear()) + String(day.getMonth()).padStart(2, '0') + String(day.getDate()).padStart(2, '0');\r\n\t}\r\n\r\n}\r\n","<template>\r\n\t<div class=\"vch__container\">\r\n\t\t<div class=\"vch__scroll-area\">\r\n\t\t\t<svg class=\"vch__wrapper\" :viewBox=\"viewbox\">\r\n\t\t\t\t<!-- Месяцы -->\r\n\t\t\t\t<g class=\"vch__months__labels__wrapper\" :transform=\"monthsLabelWrapperTransform\">\r\n\t\t\t\t\t<text class=\"vch__month__label\" v-for=\"(month, index) in monthsForLabels\" :key=\"index\"\r\n\t\t\t\t\t\t:x=\"getMonthLabelPosition(month).x\" :y=\"getMonthLabelPosition(month).y\">\r\n\t\t\t\t\t\t{{ lo.months[month.value] }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</g>\r\n\t\t\t\t<!-- Дни недели -->\r\n\t\t\t\t<g class=\"vch__days__labels__wrapper\" :transform=\"daysLabelWrapperTransform\">\r\n\t\t\t\t\t<text v-for=\"(day, idx) in lo.days\" :key=\"idx\" class=\"vch__day__label\" :x=\"0\" :y=\"16 + idx * squareSize\">\r\n\t\t\t\t\t\t{{ day }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</g>\r\n\t\t\t\t<!-- Календарь -->\r\n\t\t\t\t<g class=\"vch__year__wrapper\" :transform=\"yearWrapperTransform\">\r\n\t\t\t\t\t<g class=\"vch__month__wrapper\" v-for=\"(week, weekIndex) in heatmap.calendar\" :key=\"weekIndex\"\r\n\t\t\t\t\t\t:transform=\"getWeekPosition(weekIndex)\">\r\n\t\t\t\t\t\t<template v-for=\"(day, dayIndex) in week\" :key=\"dayIndex\">\r\n\t\t\t\t\t\t\t<rect class=\"vch__day__square\" v-if=\"day.date < now\" :rx=\"4\" :ry=\"4\" :transform=\"getDayPosition(dayIndex)\"\r\n\t\t\t\t\t\t\t\t:width=\"squareSize - squareBorder\" :height=\"squareSize - squareBorder\"\r\n\t\t\t\t\t\t\t\t:style=\"{ fill: curRangeColor[day.colorIndex] }\" :data-week-index=\"weekIndex\" :data-day-index=\"dayIndex\"\r\n\t\t\t\t\t\t\t\t@click=\"$emit('dayClick', day)\" />\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</g>\r\n\t\t\t\t</g>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t\t<div class=\"vch__legend-modern\">\r\n\t\t\t<span>{{ lo.less }}</span>\r\n\t\t\t<div class=\"vch__legend-modern-bar\">\r\n\t\t\t\t<span v-for=\"(color, idx) in curRangeColor\" :key=\"idx\" class=\"vch__legend-modern-box\"\r\n\t\t\t\t\t:style=\"{ background: color }\" />\r\n\t\t\t</div>\r\n\t\t\t<span>{{ lo.more }}</span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, computed, watch } from 'vue';\r\nimport { CalendarItem, Heatmap, Locale, Month, TooltipFormatter, Value } from '@/components/Heatmap';\r\n\r\nconst props = defineProps<{\r\n\tendDate: Date;\r\n\tmax?: number;\r\n\trangeColor?: string[];\r\n\tvalues: Value[];\r\n\tlocale?: Partial<Locale>;\r\n\tvertical?: boolean;\r\n\tdarkMode?: boolean;\r\n}>();\r\n\r\n// --- Динамический размер квадрата\r\nconst squareSize = ref(20);\r\n\r\nfunction updateSquareSize() {\r\n\tif (window.innerWidth < 420) squareSize.value = 10;\r\n\telse if (window.innerWidth < 700) squareSize.value = 14;\r\n\telse if (window.innerWidth < 900) squareSize.value = 17;\r\n\telse squareSize.value = 20;\r\n}\r\nif (typeof window !== 'undefined') {\r\n\tupdateSquareSize();\r\n\twindow.addEventListener('resize', updateSquareSize);\r\n}\r\n\r\nconst squareBorder = computed(() => squareSize.value / 8);\r\n\r\nconst defaultLocale: Locale = {\r\n\tmonths: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],\r\n\tdays: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],\r\n\tless: 'Низкая',\r\n\tmore: 'Высокая',\r\n\ton: 'на',\r\n};\r\nconst lo = ref({ ...defaultLocale, ...props.locale });\r\nconst curRangeColor = ref<string[]>(\r\n\tprops.rangeColor ?? ['#ede9fe', '#bcb4fa', '#a389f4', '#8854ff', '#322850']\r\n);\r\n\r\nconst now = ref(new Date());\r\nconst heatmap = ref(new Heatmap(props.endDate, props.values, props.max));\r\n\r\nconst LEFT_SECTION_WIDTH = computed(() => Math.ceil(squareSize.value * 2.2));\r\nconst RIGHT_SECTION_WIDTH = computed(() => squareSize.value * 2.5);\r\nconst TOP_SECTION_HEIGHT = computed(() => squareSize.value + squareSize.value / 2);\r\n\r\nconst monthsForLabels = computed(() => heatmap.value.firstFullWeekOfMonths);\r\n\r\nconst yearWrapperTransform = computed(\r\n\t() => `translate(${LEFT_SECTION_WIDTH.value}, ${TOP_SECTION_HEIGHT.value})`\r\n);\r\nconst monthsLabelWrapperTransform = computed(\r\n\t() => `translate(${LEFT_SECTION_WIDTH.value}, 0)`\r\n);\r\nconst daysLabelWrapperTransform = computed(\r\n\t() => `translate(0, ${TOP_SECTION_HEIGHT.value})`\r\n);\r\n\r\nconst viewbox = computed(() => {\r\n\tconst w =\r\n\t\tLEFT_SECTION_WIDTH.value +\r\n\t\tsquareSize.value * heatmap.value.weekCount +\r\n\t\tsquareSize.value * 1.3;\r\n\tconst h = TOP_SECTION_HEIGHT.value + squareSize.value * 7;\r\n\treturn `0 0 ${w} ${h}`;\r\n});\r\n\r\nfunction getWeekPosition(index: number) {\r\n\treturn `translate(${index * squareSize.value}, 0)`;\r\n}\r\nfunction getDayPosition(index: number) {\r\n\treturn `translate(0, ${index * squareSize.value})`;\r\n}\r\nfunction getMonthLabelPosition(month: Month) {\r\n\treturn { x: squareSize.value * month.index, y: 13 };\r\n}\r\n\r\nwatch(\r\n\t() => props.locale,\r\n\t(l) => {\r\n\t\tlo.value = l ? { ...defaultLocale, ...l } : defaultLocale;\r\n\t}\r\n);\r\n</script>\r\n\r\n<style scoped>\r\n.vch__container {\r\n\twidth: 100%;\r\n\tmax-width: 1200px;\r\n\tmargin: 0 auto;\r\n\tbackground: #fff;\r\n\tborder-radius: 18px;\r\n\tbox-shadow: 0 3px 18px #0001;\r\n\tpadding: 14px 5px 8px 5px;\r\n}\r\n\r\n.vch__scroll-area {\r\n\toverflow-x: auto;\r\n\t-webkit-overflow-scrolling: touch;\r\n\tscrollbar-width: thin;\r\n}\r\n\r\n/* SVG always wide as content */\r\nsvg.vch__wrapper {\r\n\twidth: max-content;\r\n\tmin-width: 330px;\r\n\tmax-width: 100%;\r\n\tdisplay: block;\r\n\theight: auto;\r\n}\r\n\r\n.vch__months__labels__wrapper text.vch__month__label {\r\n\tfont-size: 1em;\r\n\tfont-weight: 700;\r\n\tfill: #241d47;\r\n\tletter-spacing: 0.04em;\r\n\tuser-select: none;\r\n}\r\n\r\n.vch__days__labels__wrapper text.vch__day__label {\r\n\tfont-size: 0.87em;\r\n\tfont-weight: 600;\r\n\tfill: #241d47;\r\n\ttext-anchor: start;\r\n\tuser-select: none;\r\n}\r\n\r\n.vch__year__wrapper .vch__day__square {\r\n\ttransition: fill 0.18s, stroke 0.22s, filter 0.18s;\r\n\tstroke: transparent;\r\n\trx: 5px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.vch__year__wrapper .vch__day__square:hover {\r\n\tstroke: #8854ff;\r\n\tstroke-width: 2px;\r\n\tfilter: drop-shadow(0 0 2px #8854ff66);\r\n\tz-index: 1;\r\n}\r\n\r\n.vch__legend-modern {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 7px;\r\n\tmargin-top: 10px;\r\n\tmargin-left: 24px;\r\n\tfont-size: 1em;\r\n\tfont-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n\tcolor: #322850;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.vch__legend-modern-bar {\r\n\tdisplay: flex;\r\n\tgap: 3px;\r\n}\r\n\r\n.vch__legend-modern-box {\r\n\twidth: 18px;\r\n\theight: 12px;\r\n\tborder-radius: 3px;\r\n\tborder: 1px solid #dedede;\r\n\tdisplay: inline-block;\r\n}\r\n\r\n/* --- Адаптив --- */\r\n@media (max-width: 900px) {\r\n\t.vch__container {\r\n\t\tmax-width: 99vw;\r\n\t\tpadding: 10px 2px 8px 2px;\r\n\t}\r\n\r\n\t.vch__legend-modern {\r\n\t\tfont-size: 0.95em;\r\n\t\tmargin-left: 6px;\r\n\t\tmargin-top: 8px;\r\n\t}\r\n}\r\n\r\n@media (max-width: 600px) {\r\n\t.vch__container {\r\n\t\tmax-width: 100vw;\r\n\t\tpadding: 4px 1px 2px 1px;\r\n\t}\r\n\r\n\t.vch__legend-modern {\r\n\t\tfont-size: 0.78em;\r\n\t\tmargin-left: 2px;\r\n\t\tmargin-top: 4px;\r\n\t}\r\n\r\n\t.vch__legend-modern-box {\r\n\t\twidth: 10px;\r\n\t\theight: 7px;\r\n\t}\r\n}\r\n\r\n@media (max-width: 420px) {\r\n\t.vch__months__labels__wrapper text.vch__month__label {\r\n\t\tfont-size: 0.7em;\r\n\t}\r\n\r\n\t.vch__days__labels__wrapper text.vch__day__label {\r\n\t\tfont-size: 0.62em;\r\n\t}\r\n}\r\n</style>\r\n","import { App } from 'vue';\r\nimport CalendarHeatmap from '@/components/CalendarHeatmap.vue';\r\n\r\nfunction install(Vue: App) {\r\n\tVue.component(CalendarHeatmap.name!, CalendarHeatmap);\r\n}\r\n\r\nexport default { install };\r\nexport * from '@/components/Heatmap';\r\nexport { default as CalendarHeatmap } from '@/components/CalendarHeatmap.vue';\r\n"],"names":["_Heatmap","endDate","values","max","__publicField","day","v","i","len","date","j","dayValues","cal","index","lastWeek","currentWeek","count","numDays","newDate","entry","Heatmap","squareSize","ref","updateSquareSize","squareBorder","computed","defaultLocale","lo","props","curRangeColor","now","heatmap","LEFT_SECTION_WIDTH","TOP_SECTION_HEIGHT","monthsForLabels","yearWrapperTransform","monthsLabelWrapperTransform","daysLabelWrapperTransform","viewbox","w","h","getWeekPosition","getDayPosition","getMonthLabelPosition","month","watch","l","install","Vue","CalendarHeatmap"],"mappings":"4aAmCO,MAAMA,EAAN,KAAc,CA+BpB,YAAYC,EAAwBC,EAAiBC,EAAc,CATnEC,EAAA,kBACAA,EAAA,gBACAA,EAAA,YAEQA,EAAA,gBACAA,EAAA,+BACAA,EAAA,oBACAA,EAAA,kBAGF,KAAA,QAAY,KAAK,UAAUH,CAAO,EACvC,KAAK,IAAYE,GAAO,KAAK,KAAM,KAAK,IAAI,GAAGD,EAAO,OAAWG,EAAI,KAAK,CAAC,EAAI,EAAK,CAAC,EACrF,KAAK,UAAY,KAAK,UAAUJ,EAAS,CAACD,EAAQ,gBAAgB,EAClE,KAAK,QAAYE,CAClB,CAEA,IAAI,OAAOI,EAAY,CACtB,KAAK,IAAyB,KAAK,KAAM,KAAK,IAAI,GAAGA,EAAE,IAAID,GAAOA,EAAI,KAAK,CAAC,EAAI,EAAK,CAAC,EACtF,KAAK,QAAyBC,EAC9B,KAAK,uBAAyB,OAC9B,KAAK,UAAyB,OAC9B,KAAK,YAAyB,MAC/B,CAEA,IAAI,QAAkB,CACrB,OAAO,KAAK,OACb,CAEA,IAAI,YAAyB,CACxB,GAAA,CAAC,KAAK,YAAa,CACjB,KAAA,gBAAkB,IACd,QAAAC,EAAI,EAAGC,EAAM,KAAK,OAAO,OAAQD,EAAIC,EAAKD,IAC7C,KAAA,YAAY,IAAI,KAAK,aAAa,KAAK,OAAQA,CAAE,EAAE,IAAI,EAAG,CAC9D,MAAY,KAAK,OAAQA,CAAE,EAAE,MAC7B,WAAY,KAAK,cAAc,KAAK,OAAQA,CAAE,EAAE,KAAK,CAAA,CACrD,EAGH,OAAO,KAAK,WACb,CAEA,IAAI,WAAY,CACR,OAAA,KAAK,eAAiBP,EAAQ,YACtC,CAEA,IAAI,UAAW,CACV,GAAA,CAAC,KAAK,UAAW,CAChB,IAAAS,EAAa,KAAK,UAAU,KAAK,UAAW,CAAC,KAAK,0BAA0B,EAC/DA,EAAA,IAAI,KAAKA,EAAK,YAAY,EAAGA,EAAK,WAAYA,EAAK,QAAA,CAAS,EAC7E,KAAK,UAAY,IAAI,MAAM,KAAK,SAAS,EAChC,QAAAF,EAAI,EAAGC,EAAM,KAAK,UAAU,OAAQD,EAAIC,EAAKD,IAAK,CAC1D,KAAK,UAAWA,CAAE,EAAI,IAAI,MAAMP,EAAQ,YAAY,EACpD,QAASU,EAAI,EAAGA,EAAIV,EAAQ,aAAcU,IAAK,CAC9C,MAAMC,EAAqB,KAAK,WAAW,IAAI,KAAK,aAAaF,CAAI,CAAC,EACtE,KAAK,UAAYF,CAAE,EAAGG,CAAE,EAAI,CAC3B,KAAY,IAAI,KAAKD,EAAK,SAAS,EACnC,MAAYE,EAAYA,EAAU,MAAQ,OAC1C,WAAYA,EAAYA,EAAU,WAAa,CAAA,EAEhDF,EAAK,QAAQA,EAAK,QAAQ,EAAI,CAAC,IAIlC,OAAO,KAAK,SACb,CAEA,IAAI,uBAAiC,CAChC,GAAA,CAAC,KAAK,uBAAwB,CACjC,MAAMG,EAAwB,KAAK,SACnC,KAAK,uBAAyB,GAC9B,QAASC,EAAQ,EAAGL,EAAMI,EAAI,OAAQC,EAAQL,EAAKK,IAAS,CAC3D,MAAMC,EAAcF,EAAKC,EAAQ,CAAE,EAAG,CAAE,EAAE,KACvCE,EAAcH,EAAKC,CAAM,EAAG,CAAE,EAAE,MAC/BC,EAAS,cAAgBC,EAAY,YAAA,GAAiBD,EAAS,SAAS,EAAIC,EAAY,aACtF,KAAA,uBAAuB,KAAK,CAAE,MAAOA,EAAY,SAAS,EAAG,MAAAF,EAAO,GAI5E,OAAO,KAAK,sBACb,CAEA,cAAcG,EAAgB,CACzB,OAAAA,GAAU,KACN,EACGA,GAAS,EACZ,EACGA,GAAS,KAAK,IACjB,EAEC,KAAK,KAAOA,EAAQ,IAAO,KAAK,IAAQ,GAAK,EAAK,CAE5D,CAEA,0BAA2B,CACnB,OAAA,KAAK,UAAU,QACvB,CAEA,wBAAyB,CACxB,OAAQhB,EAAQ,aAAe,EAAK,KAAK,QAAQ,QAClD,CAEA,cAAe,CACd,OAAOA,EAAQ,iBAAmB,EAAI,KAAK,2BAA6B,KAAK,wBAC9E,CAEQ,UAAUS,EAAqBQ,EAAiB,CACjD,MAAAC,EAAU,IAAI,KAAKT,CAAI,EAC7B,OAAAS,EAAQ,QAAQA,EAAQ,QAAQ,EAAID,CAAO,EACpCC,CACR,CAEQ,UAAUC,EAAsB,CACvC,OAAQA,aAAiB,KAAQA,EAAS,IAAI,KAAKA,CAAK,CACzD,CAEQ,aAAaV,EAAqB,CACnC,MAAAJ,EAAM,KAAK,UAAUI,CAAI,EACxB,OAAA,OAAOJ,EAAI,YAAa,CAAA,EAAI,OAAOA,EAAI,SAAU,CAAA,EAAE,SAAS,EAAG,GAAG,EAAI,OAAOA,EAAI,QAAS,CAAA,EAAE,SAAS,EAAG,GAAG,CACnH,CAED,EA9IO,IAAMe,EAANpB,EAENI,EAFYgB,EAEI,4BAA4B,CAAE,UAAW,UAAW,UAAW,UAAW,UAAW,SAAU,GAC/GhB,EAHYgB,EAGI,2BAA4B,CAAE,UAAW,UAAW,UAAW,UAAW,UAAW,SAAU,GAO/GhB,EAVYgB,EAUI,iBAAyB,CACxC,OAAQ,CAAE,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,EAC7F,KAAQ,CAAE,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,EAC1D,GAAQ,KACR,KAAQ,OACR,KAAQ,MAAA,GAEThB,EAjBYgB,EAiBI,uBAAyB,iBACzChB,EAlBYgB,EAkBI,mBAAyB,KACzChB,EAnBYgB,EAmBI,eAAyB,GACzChB,EApBYgB,EAoBI,cAAyB,2eCEpCC,EAAaC,MAAI,EAAE,EAEzB,SAASC,GAAmB,CACvB,OAAO,WAAa,IAAKF,EAAW,MAAQ,GACvC,OAAO,WAAa,IAAKA,EAAW,MAAQ,GAC5C,OAAO,WAAa,IAAKA,EAAW,MAAQ,GAChDA,EAAW,MAAQ,EACzB,CACI,OAAO,OAAW,MACJE,IACV,OAAA,iBAAiB,SAAUA,CAAgB,GAGnD,MAAMC,EAAeC,EAAAA,SAAS,IAAMJ,EAAW,MAAQ,CAAC,EAElDK,EAAwB,CAC7B,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,EAC3F,KAAM,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAC/C,KAAM,SACN,KAAM,UACN,GAAI,IAAA,EAECC,EAAKL,EAAAA,IAAI,CAAE,GAAGI,EAAe,GAAGE,EAAM,OAAQ,EAC9CC,EAAgBP,EAAA,IACrBM,EAAM,YAAc,CAAC,UAAW,UAAW,UAAW,UAAW,SAAS,CAAA,EAGrEE,EAAMR,EAAAA,IAAQ,IAAA,IAAM,EACpBS,EAAUT,EAAAA,IAAI,IAAIF,EAAQQ,EAAM,QAASA,EAAM,OAAQA,EAAM,GAAG,CAAC,EAEjEI,EAAqBP,WAAS,IAAM,KAAK,KAAKJ,EAAW,MAAQ,GAAG,CAAC,EAC/CI,EAAAA,SAAS,IAAMJ,EAAW,MAAQ,GAAG,EACjE,MAAMY,EAAqBR,EAAS,SAAA,IAAMJ,EAAW,MAAQA,EAAW,MAAQ,CAAC,EAE3Ea,EAAkBT,EAAAA,SAAS,IAAMM,EAAQ,MAAM,qBAAqB,EAEpEI,EAAuBV,EAAA,SAC5B,IAAM,aAAaO,EAAmB,UAAUC,EAAmB,QAAA,EAE9DG,EAA8BX,EAAA,SACnC,IAAM,aAAaO,EAAmB,WAAA,EAEjCK,EAA4BZ,EAAA,SACjC,IAAM,gBAAgBQ,EAAmB,QAAA,EAGpCK,EAAUb,EAAAA,SAAS,IAAM,CACxB,MAAAc,EACLP,EAAmB,MACnBX,EAAW,MAAQU,EAAQ,MAAM,UACjCV,EAAW,MAAQ,IACdmB,EAAIP,EAAmB,MAAQZ,EAAW,MAAQ,EACxD,MAAO,OAAOkB,KAAKC,GAAA,CACnB,EAED,SAASC,EAAgB5B,EAAe,CAChC,MAAA,aAAaA,EAAQQ,EAAW,WACxC,CACA,SAASqB,EAAe7B,EAAe,CAC/B,MAAA,gBAAgBA,EAAQQ,EAAW,QAC3C,CACA,SAASsB,EAAsBC,EAAc,CAC5C,MAAO,CAAE,EAAGvB,EAAW,MAAQuB,EAAM,MAAO,EAAG,GAChD,CAEAC,OAAAA,EAAA,MACC,IAAMjB,EAAM,OACXkB,GAAM,CACNnB,EAAG,MAAQmB,EAAI,CAAE,GAAGpB,EAAe,GAAGoB,CAAM,EAAApB,CAC7C,CAAA,yjEC3HD,SAASqB,EAAQC,EAAU,CACtBA,EAAA,UAAUC,EAAgB,KAAOA,CAAe,CACrD,CAEe,MAAApC,EAAA,CAAE,QAAAkC,CAAQ"}